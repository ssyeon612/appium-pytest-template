name: Android Real Device Clock Test

on:
  push:
    branches: [ master ]

jobs:
  android-test:
    runs-on: self-hosted

    steps:
    - name: Checkout Code
      uses: actions/checkout@v3

    - name: Run Clock App Test
      run: |
        adb devices
        adb shell am start -n godticket.mobile/godticket.mobile.ui.MainActivity

    - name: Notify Slack
      run: |
        $payload = @{
          text = "✅ Android Clock Test 완료! 스크린샷: ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}"
        } | ConvertTo-Json -Compress

        Invoke-RestMethod -Uri "${{ secrets.SLACK_WEBHOOK_URL }}" -Method Post -ContentType 'application/json' -Body $payload
